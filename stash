# Stash Config Generated based on User Request - Revision 2
# Structure flattened, removing Final/Proxy groups as requested.
# Functional groups now directly select auto-groups or DIRECT/REJECT.
# PLEASE REPLACE THE PLACEHOLDER SUBSCRIPTION URL BELOW!

# é€šç”¨è®¾ç½® (General Settings)
mode: rule
log-level: info
# DNS æ¨¡å— (DNS Module)
dns:
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"

# æœåŠ¡æä¾›å•† (Proxy Providers) - YOU MUST EDIT THE URL HERE
proxy-providers:
  Subscribe:
    # !!! IMPORTANT: Replace this URL with your actual subscription link !!!
    url: http://your-placeholder-subscription-url
    interval: 86400 # Update interval in seconds (86400 = 1 day)
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 5

# ç­–ç•¥ç»„ (Proxy Groups)
proxy-groups:
  # --- Functional Groups (Directly selecting Auto groups or DIRECT/REJECT) ---
  - name: ðŸ‘½ AI1
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: ðŸ‘½ AI2
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: ðŸ“˜ GitHub
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: ðŸ‘¯â€â™‚ï¸ TikTok
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: ðŸ™‹ Telegram
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: ðŸ“€ æµåª’ä½“
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - ç«çƒ§é¦™æ¸¯-è‡ªåŠ¨ # Included as per original config
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: ðŸŒ å›½å¤–
    type: select
    proxies:
      - DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - ç«çƒ§å°æ¹¾-è‡ªåŠ¨ # Included as per original config
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT

  - name: âž¡ï¸ å›½å†… # Added back from original config
    type: select
    proxies:
      - DIRECT # Default for domestic should be DIRECT
      - æ‰€æœ‰-è‡ªåŠ¨
      - æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - å°æ—¥æ–°éŸ©-è‡ªåŠ¨
      - é¦™æ¸¯-è‡ªåŠ¨
      - å°æ¹¾-è‡ªåŠ¨
      - æ—¥æœ¬-è‡ªåŠ¨
      - æ–°åŠ å¡-è‡ªåŠ¨
      - éŸ©å›½-è‡ªåŠ¨
      - ç¾Žå›½-è‡ªåŠ¨
      - å…¶ä»–-è‡ªåŠ¨
      - REJECT # Usually not needed for domestic group

  # --- Auto Groups (URL-Test, based on User Filters) ---
  # These groups automatically select the best node from your subscription based on the filter
  - name: æ‰€æœ‰-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªçŽ¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|èŽ·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜Ž|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\b(USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\b|(\d{4}-\d{2}-\d{2}|\d+G)))).*$'
    # hidden: true # You might want to unhide these if you want to see them as separate groups in UI

  - name: æ¸¯å°æ—¥æ–°éŸ©-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿æ¸¯|å¹¿å°|å¹¿æ—¥|å¹¿æ–°|å¹¿éŸ©|å¹¿ç¾Ž|é¦™æ¸¯|HK|Hong Kong|ðŸ‡­ðŸ‡°|HongKong|å°æ¹¾|TW|Tai Wan|ðŸ‡¹ðŸ‡¼|ðŸ‡¨ðŸ‡³|TaiWan|Taiwan|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼çŽ‰|æ²ªæ—¥|æ·±æ—¥|ðŸ‡¯ðŸ‡µ|Japan|æ–°åŠ å¡|SG|å¡|ç‹®åŸŽ|ðŸ‡¸ðŸ‡¬|Singapore|éŸ©å›½|KR|é¦–å°”|æ˜¥å·|ðŸ‡°ðŸ‡·|Korea)'
    # hidden: true

  - name: å°æ—¥æ–°éŸ©-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿å°|å¹¿æ—¥|å¹¿æ–°|å¹¿éŸ©|å¹¿ç¾Ž|å°æ¹¾|TW|Tai Wan|ðŸ‡¹ðŸ‡¼|ðŸ‡¨ðŸ‡³|TaiWan|Taiwan|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼çŽ‰|æ²ªæ—¥|æ·±æ—¥|ðŸ‡¯ðŸ‡µ|Japan|æ–°åŠ å¡|SG|å¡|ç‹®åŸŽ|ðŸ‡¸ðŸ‡¬|Singapore|éŸ©å›½|KR|é¦–å°”|æ˜¥å·|ðŸ‡°ðŸ‡·|Korea)'
    # hidden: true

  - name: ç«çƒ§é¦™æ¸¯-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: 'ç«çƒ§ \| é¦™æ¸¯ 0[1-8]' # Ensure node names match exactly
    # hidden: true

  - name: ç«çƒ§å°æ¹¾-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: 'ç«çƒ§ \| å°æ¹¾ 0[1-5]' # Ensure node names match exactly
    # hidden: true

  - name: é¦™æ¸¯-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿æ¸¯|é¦™æ¸¯|HK|Hong Kong|ðŸ‡­ðŸ‡°|HongKong)'
    # hidden: true

  - name: å°æ¹¾-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿å°|å°æ¹¾|å°ç£|TW|Tai Wan|ðŸ‡¹ðŸ‡¼|ðŸ‡¨ðŸ‡³|TaiWan|Taiwan)'
    # hidden: true

  - name: æ—¥æœ¬-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿æ—¥|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼çŽ‰|æ²ªæ—¥|æ·±æ—¥|ðŸ‡¯ðŸ‡µ|Japan)'
    # hidden: true

  - name: æ–°åŠ å¡-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿æ–°|æ–°åŠ å¡|SG|å¡|ç‹®åŸŽ|ðŸ‡¸ðŸ‡¬|Singapore)'
    # hidden: true

  - name: éŸ©å›½-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿éŸ©|éŸ©å›½|éŸ“åœ‹|KR|é¦–å°”|æ˜¥å·|ðŸ‡°ðŸ‡·|Korea)'
    # hidden: true

  - name: ç¾Žå›½-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(å¹¿ç¾Ž|ç¾Ž|US|çº½çº¦|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’|å‡¤å‡°åŸŽ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯|æ´›æ‰|åœ£ä½•å¡ž|åœ£å…‹æ‹‰|è¥¿é›…|èŠåŠ |ðŸ‡ºðŸ‡¸|United States)'
    # hidden: true

  - name: å…¶ä»–-è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    lazy: true
    use:
      - Subscribe
    filter: '(æ³¢|æŸ¬|å°¼|ä¹Ÿ|å…‹|æ¯”|å°”|ç«‹|å†°|ç§˜|è€³|åˆ©|åŸƒ|å¸Œ|å­Ÿ|èŠ¬|æ„›|æ¾³|è‹±|å¾·|å—|æ„|æ³•|æ‹¿|å¢¨|å°|è¶Š|ä¿„|ç‘ž|æ™º|è·|æ¯”|å·´|æ²™|ç­|æ³°|å¾·|çƒ|ä»¥|Australia|Konghwaguk)'
    # hidden: true

# è§„åˆ™æä¾›è€… (Rule Providers) - Unchanged from previous version
rule-providers:
  AI1:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/1664666655/clash/refs/heads/main/list/AI.list
  AI2:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/1664666655/clash/refs/heads/main/list/AI2.list
  GitHub:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/GitHub/GitHub.list
  TikTok:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list
  Telegram:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list
  æµåª’ä½“_YouTube1:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/YouTube.list
  æµåª’ä½“_YouTube2:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
  æµåª’ä½“_HBO:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/HBO/HBO.list
  æµåª’ä½“_Disney:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list
  æµåª’ä½“_Netflix:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
  æµåª’ä½“_Spotify:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list
  æµåª’ä½“_Sping:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/1664666655/clash/refs/heads/main/list/sping.list
  å›½å¤–_Check:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Check.list
  å›½å¤–_Proxy:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list
  å›½å¤–_Global:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list
  CN_Mainland:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Stash/Rules/ChinaDomain.list
  ProxyGFW:
    behavior: classical
    format: text
    interval: 86400
    url: https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Stash/Rules/ProxyGFW.list

# è§„åˆ™ (Rules)
rules:
  # User Defined Rules
  - RULE-SET,AI1,ðŸ‘½ AI1
  - RULE-SET,AI2,ðŸ‘½ AI2
  - RULE-SET,GitHub,ðŸ“˜ GitHub
  - RULE-SET,TikTok,ðŸ‘¯â€â™‚ï¸ TikTok
  - RULE-SET,Telegram,ðŸ™‹ Telegram
  - RULE-SET,æµåª’ä½“_YouTube1,ðŸ“€ æµåª’ä½“
  - RULE-SET,æµåª’ä½“_YouTube2,ðŸ“€ æµåª’ä½“
  - RULE-SET,æµåª’ä½“_HBO,ðŸ“€ æµåª’ä½“
  - RULE-SET,æµåª’ä½“_Disney,ðŸ“€ æµåª’ä½“
  - RULE-SET,æµåª’ä½“_Netflix,ðŸ“€ æµåª’ä½“
  - RULE-SET,æµåª’ä½“_Spotify,ðŸ“€ æµåª’ä½“
  - RULE-SET,æµåª’ä½“_Sping,ðŸ“€ æµåª’ä½“
  - RULE-SET,å›½å¤–_Check,ðŸŒ å›½å¤–
  - RULE-SET,å›½å¤–_Proxy,ðŸŒ å›½å¤–
  - RULE-SET,å›½å¤–_Global,ðŸŒ å›½å¤–
  # Standard Rules
  - RULE-SET,ProxyGFW,ðŸŒ å›½å¤– # Use 'å›½å¤–' for GFW list now, or choose another default like 'æ‰€æœ‰-è‡ªåŠ¨'
  - RULE-SET,CN_Mainland,DIRECT # Domains known to be in China -> DIRECT
  - GEOIP,LAN,DIRECT         # Local network -> DIRECT
  - GEOIP,CN,DIRECT          # China IP -> DIRECT
  - MATCH,ðŸŒ å›½å¤–              # Unmatched traffic -> 'å›½å¤–' group (change if needed)
